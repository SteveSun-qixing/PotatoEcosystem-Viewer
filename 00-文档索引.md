# Chips Viewer - 文档索引

**版本**: 2.0.0  
**更新时间**: 2026-01-31  
**状态**: 正式版

---

## 文档导航

### 需求文档

基于生态设计原稿（特别是 05-查看器的插件化设计），详细说明查看器的产品需求。

1. **[01-产品概述](./需求文档/01-产品概述.md)** ⭐
   - 产品定位和核心设计理念
   - 与编辑引擎的关系（双轨设计）
   - 架构定位和依赖关系
   - 核心特性（插件化查看工具系统）
   - 基于公共基础层的设计
   - 微内核路由架构
   - 目标用户和核心价值

2. **[02-功能需求](./需求文档/02-功能需求.md)** ⭐
   - 卡片渲染功能（所有基础卡片类型）
   - 箱子展示功能（各种布局）
   - 查看工具插件系统详解
   - 用户交互功能
   - **重点：如何通过路由调用公共基础层的查看工具**
   - 性能要求和兼容性

3. **[03-用户故事](./需求文档/03-用户故事.md)**
   - 内容消费者使用场景
   - 移动端用户使用场景
   - 企业用户使用场景
   - 开发者集成场景
   - 插件开发者场景

4. **[04-插件系统需求](./需求文档/04-插件系统需求.md)**
   - 查看工具插件的需求
   - 插件生命周期
   - 插件与基础层的关系
   - 插件市场和生态

### 技术文档

说明查看器的技术实现，重点强调微内核路由、公共基础层集成、组件库使用。

1. **[01-架构设计](./技术文档/01-架构设计.md)** ⭐⭐⭐
   - 分层架构详解
   - **微内核路由架构**（核心原则）
   - 模块依赖关系
   - 与公共基础层的集成
   - 数据流和通信方式
   - 设计模式和性能优化

2. **[02-公共基础层使用指南](./技术文档/02-公共基础层使用指南.md)** ⭐⭐
   - 如何通过路由调用所有查看工具
   - VideoPlayer、AudioPlayer、ImageViewer 等组件的使用
   - 媒体组件、文本组件、文件组件、网络组件
   - 界面组件库和系统服务
   - 调用示例和最佳实践

3. **[03-插件系统设计](./技术文档/03-插件系统设计.md)** ⭐
   - 查看工具插件接口规范
   - 插件加载和生命周期
   - 插件调度算法
   - 插件沙箱和安全性
   - 插件开发指南

4. **[04-微内核路由使用](./技术文档/04-微内核路由使用.md)** ⭐⭐
   - 路由系统详解
   - 如何通过路由调用模块
   - 请求和响应格式
   - 路由注册和服务发现
   - 错误处理和日志记录
   - 实际使用示例

5. **[05-组件库集成](./技术文档/05-组件库集成.md)** ⭐
   - 如何使用 Chips-ComponentLibrary
   - 功能与样式分离
   - 主题系统集成
   - 基础组件、布局组件、卡片组件
   - 组件开发规范

6. **[06-渲染引擎设计](./技术文档/06-渲染引擎设计.md)**
   - 卡片渲染流程
   - 渲染器接口设计
   - 主题应用机制
   - 布局引擎
   - 性能优化（虚拟滚动、懒加载等）

7. **[07-开发指南](./技术文档/07-开发指南.md)**
   - 开发环境搭建
   - 项目结构说明
   - 开发流程和规范
   - 调试和测试
   - 发布和部署

8. **[08-API 完整索引](./技术文档/08-API完整索引.md)**
   - 所有公开 API 列表
   - 路由服务索引
   - 插件接口索引

9. **[09-代码结构](./技术文档/09-代码结构.md)**
   - 目录结构说明
   - 模块划分
   - 文件组织规范

10. **[10-测试手册](./技术文档/10-测试手册.md)**
    - 单元测试
    - 集成测试
    - E2E 测试
    - 性能测试

### 开发规范

基于生态共用规范，添加查看器特定的开发规范。

**[开发规范](./开发规范.md)** ⭐⭐⭐
- 中心路由原则（最重要）
- 多语言支持（零硬编码）
- 前后端分离
- 代码规范、测试规范、性能规范
- **查看器特定规范**：
  - 渲染引擎规范
  - 插件系统规范
  - 开源组件集成规范
  - 性能要求

---

## 阅读建议

### 快速了解查看器

适合第一次接触 Chips Viewer 的读者。

```
需求文档/01-产品概述 
    ↓
需求文档/02-功能需求（概览）
    ↓
技术文档/01-架构设计（概览）
```

### 理解核心架构

适合需要深入了解技术架构的开发者。

```
技术文档/01-架构设计 ⭐⭐⭐
    ↓
技术文档/04-微内核路由使用 ⭐⭐
    ↓
技术文档/02-公共基础层使用指南 ⭐⭐
    ↓
开发规范（重点阅读中心路由原则）⭐⭐⭐
```

### 开发查看器功能

适合参与查看器核心开发的开发者。

```
开发规范 ⭐⭐⭐（必读）
    ↓
技术文档/01-架构设计
    ↓
技术文档/04-微内核路由使用
    ↓
技术文档/02-公共基础层使用指南
    ↓
技术文档/05-组件库集成
    ↓
技术文档/06-渲染引擎设计
    ↓
技术文档/07-开发指南
```

### 开发查看工具插件

适合第三方插件开发者。

```
需求文档/04-插件系统需求
    ↓
技术文档/03-插件系统设计
    ↓
技术文档/04-微内核路由使用（学习如何调用基础层）
    ↓
技术文档/02-公共基础层使用指南（了解可用的组件）
    ↓
开发规范/插件开发部分
```

### 集成查看器到应用

适合需要在自己应用中集成查看器的开发者。

```
需求文档/01-产品概述
    ↓
技术文档/08-API完整索引
    ↓
技术文档/07-开发指南/集成部分
```

---

## 核心概念索引

### 微内核路由

**定义**：所有模块间通信都必须经过薯片内核（Chips Core）路由，这是整个架构最核心的设计原则。

**相关文档**：
- [开发规范/中心路由原则](./开发规范.md#11-中心路由原则)
- [技术文档/01-架构设计/微内核路由架构](./技术文档/01-架构设计.md#22-微内核路由架构)
- [技术文档/04-微内核路由使用](./技术文档/04-微内核路由使用.md)

**关键点**：
- ✅ 所有调用通过 `Core.request()`
- ❌ 禁止模块直接调用
- ✅ 完全解耦，可替换
- ✅ 统一的权限和日志

### 公共基础层（Chips Foundation）

**定义**：位于微内核之上，提供所有通用功能模块，包括媒体、文本、文件、网络、界面、系统服务等。

**相关文档**：
- [需求文档/01-产品概述/基于生态基础设施](./需求文档/01-产品概述.md#41-基于公共基础层)
- [需求文档/02-功能需求/卡片渲染功能](./需求文档/02-功能需求.md#2-卡片渲染功能)
- [技术文档/02-公共基础层使用指南](./技术文档/02-公共基础层使用指南.md)

**重要模块**：
- VideoPlayer、AudioPlayer、ImageViewer（媒体）
- RichTextRenderer、MarkdownParser、CodeHighlighter（文本）
- ZIPProcessor、FileIdentifier（文件）
- HTTPClient、DownloadManager（网络）
- UIControls、WindowManager、DragDropSystem（界面）
- DataSerializer、LogSystem、I18nSystem、ConfigManager（系统）

### 查看工具插件系统

**定义**：查看器内部的各种文件查看工具都是插件，用户可以安装更强大的专业查看工具插件。

**相关文档**：
- [需求文档/01-产品概述/插件化查看工具系统](./需求文档/01-产品概述.md#31-插件化查看工具系统)
- [需求文档/02-功能需求/查看工具插件系统](./需求文档/02-功能需求.md#5-查看工具插件系统)
- [需求文档/04-插件系统需求](./需求文档/04-插件系统需求.md)
- [技术文档/03-插件系统设计](./技术文档/03-插件系统设计.md)

**默认插件**：
- 视频播放器（基于 Video.js）
- 音频播放器（基于 Howler.js）
- 图片查看器（基于 Viewer.js）
- 代码查看器（基于 Prism.js）
- Markdown 渲染器（基于 Marked.js + KaTeX）
- PDF 查看器（基于 PDF.js）
- 文本查看器、3D 模型渲染器

### 组件库集成

**定义**：使用 Chips-ComponentLibrary 构建界面，遵循功能与样式分离的设计。

**相关文档**：
- [技术文档/05-组件库集成](./技术文档/05-组件库集成.md)

**关键点**：
- 组件只实现功能逻辑
- 样式由主题包提供
- 原子级主题应用
- 层级覆盖机制

---

## 重要标准和规范

### 必须遵循的规范

这些规范在整个 Chips 生态中强制执行：

1. **[中心路由架构原则](./开发规范.md#11-中心路由原则)** ⭐⭐⭐
   - 所有通信通过微内核
   - 禁止模块直接调用

2. **[多语言支持规范](./开发规范.md#2-多语言规范)** ⭐⭐
   - 零硬编码原则
   - 使用系统统一的多语言方案

3. **[前后端分离规范](./开发规范.md#13-前后端分离)** ⭐
   - 前端只负责界面
   - 后端只负责逻辑
   - 通过路由通信

### 生态共用规范

位于 `生态共用/` 目录的规范文档，适用于所有 Chips 产品：

- [01-薯片协议规范](../生态共用/01-薯片协议规范.md)
- [04-系统接口标准](../生态共用/04-系统接口标准.md)
- [05-前端接口标准](../生态共用/05-前端接口标准.md)
- [06-后端接口标准](../生态共用/06-后端接口标准.md)
- [07-插件开发规范](../生态共用/07-插件开发规范.md)
- [08-开发规范总则](../生态共用/08-开发规范总则.md)
- [11-多语言系统规范](../生态共用/11-多语言系统规范.md)

### 公共基础层文档

了解可用的基础层组件：

- [Chips-Foundation/README](../Chips-Foundation/README.md)
- [Chips-Foundation/技术文档/01-架构设计](../Chips-Foundation/技术文档/01-架构设计.md)
- [Chips-Foundation/技术文档/02-模块清单](../Chips-Foundation/技术文档/02-模块清单.md)
- [Chips-Foundation/技术文档/03-接口协议](../Chips-Foundation/技术文档/03-接口协议.md)

### 组件库文档

了解前端组件库的使用：

- [Chips-ComponentLibrary/需求文档/01-产品概述](../Chips-ComponentLibrary/需求文档/01-产品概述.md)
- [Chips-ComponentLibrary/技术文档/01-架构设计](../Chips-ComponentLibrary/技术文档/01-架构设计.md)
- [Chips-ComponentLibrary/技术文档/03-主题系统实现](../Chips-ComponentLibrary/技术文档/03-主题系统实现.md)

---

## 常见问题 (FAQ)

### Q1: 查看器和编辑引擎有什么区别？

**A**: 查看器专注于查看和浏览卡片内容，轻量快速。编辑引擎提供完整的创作和编辑能力。两者可以是独立产品，也可以合并为同一软件的不同模式。详见 [产品概述/与编辑引擎的关系](./需求文档/01-产品概述.md#13-与编辑引擎的关系)。

### Q2: 查看器的查看工具从哪里来？

**A**: 所有查看工具来自**公共基础层（Chips Foundation）**。查看器通过微内核路由调用这些组件，不需要自己实现。详见 [功能需求/卡片渲染功能](./需求文档/02-功能需求.md#21-基础卡片渲染架构)。

### Q3: 什么是微内核路由？为什么重要？

**A**: 微内核路由是整个架构最核心的设计原则。所有模块间通信都必须经过薯片内核路由，模块之间不能直接调用。这确保了模块完全解耦、可替换，并提供统一的权限和日志管理。详见 [开发规范/中心路由原则](./开发规范.md#11-中心路由原则)。

### Q4: 如何通过路由调用公共基础层的组件？

**A**: 使用 `Core.request()` 方法：

```typescript
const response = await Core.request({
  service: 'foundation.video.play',
  payload: {
    video_uri: 'chips://card/abc123/video.mp4',
    options: { autoplay: false }
  }
});
```

详见 [公共基础层使用指南](./技术文档/02-公共基础层使用指南.md) 和 [微内核路由使用](./技术文档/04-微内核路由使用.md)。

### Q5: 如何开发查看工具插件？

**A**: 查看工具插件实现标准接口，通过路由调用基础层组件。详见 [插件系统设计](./技术文档/03-插件系统设计.md) 和 [插件开发规范](../生态共用/07-插件开发规范.md)。

### Q6: 查看器使用什么前端框架？

**A**: Vue 3 + TypeScript，使用 Chips-ComponentLibrary（功能与样式分离的组件库）。详见 [组件库集成](./技术文档/05-组件库集成.md)。

### Q7: 如何确保代码符合规范？

**A**: 遵循 [开发规范](./开发规范.md)，特别注意：
- ✅ 所有通信通过路由
- ❌ 禁止硬编码文本
- ✅ 完整的错误处理
- ✅ 测试覆盖率达标

---

## 文档维护

### 文档更新流程

1. 修改文档内容
2. 更新文档头部的版本和时间
3. 更新本索引（如果有新文档或结构变化）
4. 提交 Pull Request
5. 代码审查
6. 合并到主分支

### 文档贡献

欢迎贡献文档改进！请参考：
- 生态共用的文档规范
- 使用清晰的中文
- 提供代码示例
- 保持格式一致

### 反馈和建议

如有问题或建议，请：
- 提交 Issue 到官方仓库
- 在开发者社区讨论
- 联系文档维护团队

---

**文档维护者**：Chips 生态团队  
**审核状态**：✅ 已审核  
**最后更新**：2026-01-31
